<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ¯ÙˆÙ„ÙŠ - Ø£Ø¨ÙˆØ³Ù„ÙŠÙ…Ø§Ù† Ù„Ù„Ù…Ø­Ø§Ø³Ø¨Ø©</title>
    
    <!-- Ø§Ù„Ø®Ø·ÙˆØ· -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù…ÙˆØ¯ÙˆÙ„ÙŠØ© -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/login.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/sales.css">
    <link rel="stylesheet" href="css/products.css">
    
    <style>
        .test-container {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-section {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-neumorphic);
        }
        
        .test-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .status {
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        #testContent {
            min-height: 400px;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            background: var(--bg-primary);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ¯ÙˆÙ„ÙŠ - Ø£Ø¨ÙˆØ³Ù„ÙŠÙ…Ø§Ù† Ù„Ù„Ù…Ø­Ø§Ø³Ø¨Ø©</h1>
        
        <div class="test-section">
            <h2>Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</h2>
            <div id="systemStatus">Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ù†Ø¸Ø§Ù…...</div>
        </div>
        
        <div class="test-section">
            <h2>Ø§Ø®ØªØ¨Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ­Ø¯Ø§Øª</h2>
            <div class="test-buttons">
                <button class="btn primary" onclick="testModule('dashboard')">
                    <i class="fas fa-tachometer-alt"></i>
                    Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
                </button>
                <button class="btn secondary" onclick="testModule('sales')">
                    <i class="fas fa-shopping-cart"></i>
                    Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
                </button>
                <button class="btn info" onclick="testModule('products')">
                    <i class="fas fa-box"></i>
                    Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                </button>
                <button class="btn success" onclick="testModule('customers')">
                    <i class="fas fa-users"></i>
                    Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
                </button>
                <button class="btn warning" onclick="testModule('suppliers')">
                    <i class="fas fa-truck"></i>
                    Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†
                </button>
            </div>
            
            <div id="testResults"></div>
        </div>
        
        <div class="test-section">
            <h2>Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ù…Ø­Ù…Ù„Ø©</h2>
            <div id="testContent">
                <p>Ø§Ø®ØªØ± ÙˆØ­Ø¯Ø© Ù„Ø§Ø®ØªØ¨Ø§Ø±Ù‡Ø§ Ù…Ù† Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø£Ø¹Ù„Ø§Ù‡</p>
            </div>
        </div>
        
        <div class="test-section">
            <h2>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©</h2>
            <div class="test-buttons">
                <button class="btn primary" onclick="testUtilities()">
                    Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
                </button>
                <button class="btn secondary" onclick="testNotifications()">
                    Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
                </button>
                <button class="btn info" onclick="testModals()">
                    Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
                </button>
            </div>
            <div id="utilityResults"></div>
        </div>
    </div>

    <!-- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© -->
    <script src="database.js"></script>
    <script src="sample-data.js"></script>
    
    <!-- Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ù…Ø¯Ù…Ø¬Ø© -->
    <script src="js/templates.js"></script>
    
    <!-- Ù†Ø¸Ø§Ù… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ­Ø¯Ø§Øª -->
    <script src="js/main.js"></script>

    <script>
        // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ¯ÙˆÙ„ÙŠ
        let testResults = [];
        
        // ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        window.addEventListener('load', function() {
            setTimeout(checkSystemStatus, 1000);
        });
        
        function checkSystemStatus() {
            const statusDiv = document.getElementById('systemStatus');
            let status = [];
            
            // ÙØ­Øµ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            if (window.Database) {
                status.push('<div class="status success">âœ… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: Ù…Ø­Ù…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­</div>');
            } else {
                status.push('<div class="status error">âŒ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„</div>');
            }
            
            // ÙØ­Øµ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨
            if (window.Templates) {
                const templateCount = Object.keys(window.Templates).length;
                status.push(`<div class="status success">âœ… Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨: ${templateCount} Ù‚Ø§Ù„Ø¨ Ù…Ø­Ù…Ù„</div>`);
            } else {
                status.push('<div class="status error">âŒ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨: ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„</div>');
            }
            
            // ÙØ­Øµ ØªØ­Ù…ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆØ­Ø¯Ø§Øª
            if (window.moduleLoader) {
                status.push('<div class="status success">âœ… Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆØ­Ø¯Ø§Øª: Ù…Ø­Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­</div>');
            } else {
                status.push('<div class="status error">âŒ Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆØ­Ø¯Ø§Øª: ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„</div>');
            }
            
            // ÙØ­Øµ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
            if (window.formatCurrency && window.showNotification) {
                status.push('<div class="status success">âœ… Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©: Ù…ØªØ§Ø­Ø©</div>');
            } else {
                status.push('<div class="status error">âŒ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©: ØºÙŠØ± Ù…ØªØ§Ø­Ø©</div>');
            }
            
            statusDiv.innerHTML = status.join('');
        }
        
        async function testModule(moduleName) {
            const resultsDiv = document.getElementById('testResults');
            const contentDiv = document.getElementById('testContent');
            
            try {
                resultsDiv.innerHTML = `<div class="status info">ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ­Ø¯Ø© ${moduleName}...</div>`;
                
                // Ø§Ø®ØªØ¨Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ù„Ø¨
                if (!window.Templates || !window.Templates[moduleName]) {
                    throw new Error(`Ø§Ù„Ù‚Ø§Ù„Ø¨ ${moduleName} ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯`);
                }
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ù„Ø¨
                contentDiv.innerHTML = window.Templates[moduleName];
                
                // Ø§Ø®ØªØ¨Ø§Ø± ØªØ­Ù…ÙŠÙ„ JavaScript Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„ÙˆØ­Ø¯Ø©
                const scriptPath = `js/${moduleName}.js`;
                await loadScript(scriptPath);
                
                // Ø§Ø®ØªØ¨Ø§Ø± ØªØ´ØºÙŠÙ„ ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
                const initFunctionName = `init${capitalize(moduleName)}`;
                if (typeof window[initFunctionName] === 'function') {
                    window[initFunctionName]();
                    resultsDiv.innerHTML = `<div class="status success">âœ… ÙˆØ­Ø¯Ø© ${moduleName} ØªÙ… ØªØ­Ù…ÙŠÙ„Ù‡Ø§ ÙˆØªØ´ØºÙŠÙ„Ù‡Ø§ Ø¨Ù†Ø¬Ø§Ø­</div>`;
                } else {
                    resultsDiv.innerHTML = `<div class="status info">â„¹ï¸ ÙˆØ­Ø¯Ø© ${moduleName} ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­ (Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ¸ÙŠÙØ© ØªÙ‡ÙŠØ¦Ø©)</div>`;
                }
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="status error">âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ ÙˆØ­Ø¯Ø© ${moduleName}: ${error.message}</div>`;
                contentDiv.innerHTML = `<div class="error">Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰: ${error.message}</div>`;
            }
        }
        
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                if (document.querySelector(`script[src="${src}"]`)) {
                    resolve();
                    return;
                }
                
                const script = document.createElement('script');
                script.src = src;
                script.onload = resolve;
                script.onerror = () => reject(new Error(`ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ ${src}`));
                document.head.appendChild(script);
            });
        }
        
        function capitalize(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }
        
        function testUtilities() {
            const resultsDiv = document.getElementById('utilityResults');
            let results = [];
            
            // Ø§Ø®ØªØ¨Ø§Ø± formatCurrency
            if (window.formatCurrency) {
                const formatted = formatCurrency(123.456);
                results.push(`<div class="status success">âœ… formatCurrency: ${formatted}</div>`);
            } else {
                results.push('<div class="status error">âŒ formatCurrency ØºÙŠØ± Ù…ØªØ§Ø­</div>');
            }
            
            // Ø§Ø®ØªØ¨Ø§Ø± toArabicNumbers
            if (window.toArabicNumbers) {
                const arabic = toArabicNumbers('123456');
                results.push(`<div class="status success">âœ… toArabicNumbers: ${arabic}</div>`);
            } else {
                results.push('<div class="status error">âŒ toArabicNumbers ØºÙŠØ± Ù…ØªØ§Ø­</div>');
            }
            
            resultsDiv.innerHTML = results.join('');
        }
        
        function testNotifications() {
            if (window.showNotification) {
                showNotification('Ù‡Ø°Ø§ Ø§Ø®ØªØ¨Ø§Ø± Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª', 'success');
                showNotification('Ø¥Ø´Ø¹Ø§Ø± ØªØ­Ø°ÙŠØ±ÙŠ', 'warning');
                showNotification('Ø¥Ø´Ø¹Ø§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙŠ', 'info');
            } else {
                alert('ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØºÙŠØ± Ù…ØªØ§Ø­Ø©');
            }
        }
        
        function testModals() {
            if (window.showModal) {
                showModal('Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©', '<p>Ù‡Ø°Ø§ Ø§Ø®ØªØ¨Ø§Ø± Ù„Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ¯ÙˆÙ„ÙŠ</p>');
            } else {
                alert('ÙˆØ¸ÙŠÙØ© Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© ØºÙŠØ± Ù…ØªØ§Ø­Ø©');
            }
        }
    </script>
</body>
</html>
