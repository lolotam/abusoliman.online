<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฃุจูุณูููุงู ูููุญุงุณุจุฉ - ูุธุงู ุฅุฏุงุฑุฉ ููุงุท ุงูุจูุน</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- ุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <div class="logo">
                    <i class="fas fa-cash-register"></i>
                    <h1>ุฃุจูุณูููุงู ูููุญุงุณุจุฉ</h1>
                    <p>ูุธุงู ุฅุฏุงุฑุฉ ููุงุท ุงูุจูุน</p>
                </div>
            </div>
            <form id="loginForm" class="login-form">
                <div class="input-group">
                    <label for="username">ุงุณู ุงููุณุชุฎุฏู</label>
                    <input type="text" id="username" placeholder="ุฃุฏุฎู ุงุณู ุงููุณุชุฎุฏู" required autocomplete="username">
                    <i class="fas fa-user"></i>
                </div>

                <div class="input-group">
                    <label for="password">ูููุฉ ุงููุฑูุฑ</label>
                    <input type="password" id="password" placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ" required autocomplete="current-password">
                    <i class="fas fa-lock"></i>
                </div>

                <button type="submit" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i>
                    ุชุณุฌูู ุงูุฏุฎูู
                </button>

                <div id="loginError" class="login-error" style="display: none;"></div>
            </form>
        </div>
    </div>

    <!-- ุงูุชุทุจูู ุงูุฑุฆูุณู -->
    <div id="mainApp" class="main-app hidden">
        <!-- ุดุฑูุท ุงูุชููู ุงูุนููู -->
        <header class="top-navbar">
            <div class="navbar-brand">
                <button class="mobile-menu-btn" onclick="toggleMobileMenu()" style="display: none;">
                    <i class="fas fa-bars"></i>
                </button>
                <i class="fas fa-cash-register"></i>
                <span>ุฃุจูุณูููุงู ูููุญุงุณุจุฉ</span>
            </div>
            <div class="navbar-controls">
                <button id="themeToggle" class="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="user-menu">
                    <button class="user-btn">
                        <i class="fas fa-user"></i>
                        <span class="user-name">ุงููุฏูุฑ</span>
                    </button>
                    <div class="dropdown-menu">
                        <a href="#" onclick="showSection('settings')">
                            <i class="fas fa-cog"></i>
                            ุงูุฅุนุฏุงุฏุงุช
                        </a>
                        <a href="#" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i>
                            ุชุณุฌูู ุงูุฎุฑูุฌ
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Overlay ููุฌูุงู -->
        <div class="mobile-overlay" onclick="closeMobileMenu()"></div>

        <!-- ุงูุดุฑูุท ุงูุฌุงูุจู -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="#" onclick="showSection('dashboard')" class="nav-link active">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>ููุญุฉ ุงููุนูููุงุช</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('sales')" class="nav-link">
                            <i class="fas fa-shopping-cart"></i>
                            <span>ุงููุจูุนุงุช</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('products')" class="nav-link">
                            <i class="fas fa-box"></i>
                            <span>ุงูููุชุฌุงุช</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('customers')" class="nav-link">
                            <i class="fas fa-users"></i>
                            <span>ุงูุนููุงุก</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('suppliers')" class="nav-link">
                            <i class="fas fa-truck"></i>
                            <span>ุงูููุฑุฏูู</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('purchases')" class="nav-link">
                            <i class="fas fa-shopping-bag"></i>
                            <span>ุงููุดุชุฑูุงุช</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('warehouses')" class="nav-link">
                            <i class="fas fa-warehouse"></i>
                            <span>ุงููุฎุงุฒู</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('debts')" class="nav-link">
                            <i class="fas fa-money-bill-wave"></i>
                            <span>ุงูุฏููู ูุงููุฏููุนุงุช</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('reports')" class="nav-link">
                            <i class="fas fa-chart-bar"></i>
                            <span>ุงูุชูุงุฑูุฑ</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('settings')" class="nav-link">
                            <i class="fas fa-cog"></i>
                            <span>ุงูุฅุนุฏุงุฏุงุช</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
        <main class="main-content">
            <!-- ููุญุฉ ุงููุนูููุงุช -->
            <section id="dashboard" class="content-section active">
                <div class="section-header">
                    <h2><i class="fas fa-tachometer-alt"></i> ููุญุฉ ุงููุนูููุงุช</h2>
                    <div class="date-time-info">
                        <div class="date-info">
                            <div class="hijri-date">
                                <i class="fas fa-calendar-alt"></i>
                                <span id="currentHijriDate"></span>
                            </div>
                            <div class="gregorian-date">
                                <i class="fas fa-calendar"></i>
                                <span id="currentGregorianDate"></span>
                            </div>
                        </div>
                        <div class="time-info">
                            <div class="current-time">
                                <i class="fas fa-clock"></i>
                                <span id="currentTime"></span>
                            </div>
                            <div class="day-of-week">
                                <span id="dayOfWeek"></span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ุจุทุงูุงุช ุงูุฅุญุตุงุฆูุงุช -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalSales">ู.ููู ุฏ.ู</h3>
                            <p>ุฅุฌูุงูู ุงููุจูุนุงุช ุงูููู</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-box"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalProducts">ู</h3>
                            <p>ุนุฏุฏ ุงูููุชุฌุงุช</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalCustomers">ู</h3>
                            <p>ุนุฏุฏ ุงูุนููุงุก</p>
                        </div>
                    </div>
                    
                    <div class="stat-card clickable-card" onclick="showLowStockDetails()">
                        <div class="stat-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="lowStockItems">ู</h3>
                            <p>ููุชุฌุงุช ููุฎูุถุฉ ุงููุฎุฒูู</p>
                        </div>
                        <div class="card-action-hint">
                            <i class="fas fa-external-link-alt"></i>
                        </div>
                    </div>

                    <!-- ุจุทุงูุงุช ุงูููุงุชูุฑ ุงูุฌุฏูุฏุฉ -->
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-receipt"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalInvoices">ู</h3>
                            <p>ุฅุฌูุงูู ุงูููุงุชูุฑ</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-day"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="todayInvoices">ู</h3>
                            <p>ููุงุชูุฑ ุงูููู</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-week"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="weekInvoices">ู</h3>
                            <p>ููุงุชูุฑ ูุฐุง ุงูุฃุณุจูุน</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="monthInvoices">ู</h3>
                            <p>ููุงุชูุฑ ูุฐุง ุงูุดูุฑ</p>
                        </div>
                    </div>
                </div>

                <!-- ููุญุฉ ุงูุงุฎุชุตุงุฑุงุช ุงูุณุฑูุนุฉ -->
                <div class="quick-actions-section">
                    <div class="section-title">
                        <h3><i class="fas fa-bolt"></i> ุงูุงุฎุชุตุงุฑุงุช ุงูุณุฑูุนุฉ</h3>
                        <p>ุงููุตูู ุงูุณุฑูุน ูููุธุงุฆู ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงู</p>
                    </div>

                    <div class="quick-actions-grid">
                        <!-- ูุฌููุนุฉ ุงููุจูุนุงุช -->
                        <div class="action-group">
                            <div class="group-header">
                                <i class="fas fa-shopping-cart"></i>
                                <span>ุงููุจูุนุงุช</span>
                            </div>
                            <div class="action-buttons">
                                <button class="action-btn primary" onclick="showSection('sales')">
                                    <i class="fas fa-cash-register"></i>
                                    <span>ููุทุฉ ุงูุจูุน</span>
                                </button>
                                <button class="action-btn" onclick="showAddInvoiceModal()">
                                    <i class="fas fa-plus-circle"></i>
                                    <span>ูุงุชูุฑุฉ ุฌุฏูุฏุฉ</span>
                                </button>
                                <button class="action-btn" onclick="showRecentTransactions()">
                                    <i class="fas fa-history"></i>
                                    <span>ุงููุนุงููุงุช ุงูุฃุฎูุฑุฉ</span>
                                </button>
                            </div>
                        </div>

                        <!-- ูุฌููุนุฉ ุงูููุชุฌุงุช -->
                        <div class="action-group">
                            <div class="group-header">
                                <i class="fas fa-box"></i>
                                <span>ุงูููุชุฌุงุช</span>
                            </div>
                            <div class="action-buttons">
                                <button class="action-btn primary" onclick="showAddProductModal()">
                                    <i class="fas fa-plus"></i>
                                    <span>ุฅุถุงูุฉ ููุชุฌ</span>
                                </button>
                                <button class="action-btn warning" onclick="showLowStockDetails()">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    <span>ุชูุจููุงุช ุงููุฎุฒูู</span>
                                </button>
                                <button class="action-btn" onclick="showSection('products')">
                                    <i class="fas fa-warehouse"></i>
                                    <span>ุฅุฏุงุฑุฉ ุงููุฎุฒูู</span>
                                </button>
                            </div>
                        </div>

                        <!-- ูุฌููุนุฉ ุงูุนููุงุก -->
                        <div class="action-group">
                            <div class="group-header">
                                <i class="fas fa-users"></i>
                                <span>ุงูุนููุงุก</span>
                            </div>
                            <div class="action-buttons">
                                <button class="action-btn primary" onclick="showAddCustomerModal()">
                                    <i class="fas fa-user-plus"></i>
                                    <span>ุฅุถุงูุฉ ุนููู</span>
                                </button>
                                <button class="action-btn" onclick="showPaymentCollection()">
                                    <i class="fas fa-money-bill-wave"></i>
                                    <span>ุชุญุตูู ูุฏููุนุงุช</span>
                                </button>
                                <button class="action-btn" onclick="showCustomerStatements()">
                                    <i class="fas fa-file-invoice"></i>
                                    <span>ูุดูู ุงูุญุณุงุจุงุช</span>
                                </button>
                            </div>
                        </div>

                        <!-- ูุฌููุนุฉ ุงูููุฑุฏูู -->
                        <div class="action-group">
                            <div class="group-header">
                                <i class="fas fa-truck"></i>
                                <span>ุงูููุฑุฏูู</span>
                            </div>
                            <div class="action-buttons">
                                <button class="action-btn primary" onclick="showAddSupplierModal()">
                                    <i class="fas fa-plus"></i>
                                    <span>ุฅุถุงูุฉ ููุฑุฏ</span>
                                </button>
                                <button class="action-btn" onclick="showAddPurchaseModal()">
                                    <i class="fas fa-shopping-bag"></i>
                                    <span>ุฃูุฑ ุดุฑุงุก</span>
                                </button>
                                <button class="action-btn" onclick="showSupplierPayments()">
                                    <i class="fas fa-credit-card"></i>
                                    <span>ุฅุฏุงุฑุฉ ุงููุฏููุนุงุช</span>
                                </button>
                            </div>
                        </div>

                        <!-- ูุฌููุนุฉ ุงููุฎุงุฒู -->
                        <div class="action-group">
                            <div class="group-header">
                                <i class="fas fa-warehouse"></i>
                                <span>ุงููุฎุงุฒู</span>
                            </div>
                            <div class="action-buttons">
                                <button class="action-btn primary" onclick="showStockTransfer()">
                                    <i class="fas fa-exchange-alt"></i>
                                    <span>ููู ูุฎุฒูู</span>
                                </button>
                                <button class="action-btn" onclick="showInventoryAdjustment()">
                                    <i class="fas fa-edit"></i>
                                    <span>ุชุนุฏูู ุงูุฌุฑุฏ</span>
                                </button>
                                <button class="action-btn" onclick="showMovementHistory()">
                                    <i class="fas fa-list-alt"></i>
                                    <span>ุณุฌู ุงูุญุฑูุงุช</span>
                                </button>
                            </div>
                        </div>

                        <!-- ูุฌููุนุฉ ุงูุชูุงุฑูุฑ -->
                        <div class="action-group">
                            <div class="group-header">
                                <i class="fas fa-chart-bar"></i>
                                <span>ุงูุชูุงุฑูุฑ</span>
                            </div>
                            <div class="action-buttons">
                                <button class="action-btn primary" onclick="showDailySalesReport()">
                                    <i class="fas fa-calendar-day"></i>
                                    <span>ูุจูุนุงุช ุงูููู</span>
                                </button>
                                <button class="action-btn" onclick="showInventoryReport()">
                                    <i class="fas fa-boxes"></i>
                                    <span>ุชูุฑูุฑ ุงููุฎุฒูู</span>
                                </button>
                                <button class="action-btn" onclick="showFinancialSummary()">
                                    <i class="fas fa-calculator"></i>
                                    <span>ุงูููุฎุต ุงููุงูู</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ุงูุฑุณูู ุงูุจูุงููุฉ ูุงูุชูุจููุงุช -->
                <div class="dashboard-grid">
                    <div class="chart-container">
                        <h3>ูุจูุนุงุช ุงูุฃุณุจูุน</h3>
                        <canvas id="salesChart"></canvas>
                    </div>
                    
                    <div class="alerts-container">
                        <h3>ุงูุชูุจููุงุช</h3>
                        <div id="alertsList" class="alerts-list">
                            <!-- ุงูุชูุจููุงุช ุณุชุธูุฑ ููุง -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- ุฃูุณุงู ุฃุฎุฑู ุณุชุชู ุฅุถุงูุชูุง -->
            <section id="sales" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-shopping-cart"></i> ุงููุจูุนุงุช</h2>
                </div>
                <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
            </section>

            <section id="products" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-box"></i> ุงูููุชุฌุงุช</h2>
                </div>
                <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
            </section>

            <section id="customers" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-users"></i> ุงูุนููุงุก</h2>
                </div>
                <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
            </section>

            <section id="suppliers" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-truck"></i> ุงูููุฑุฏูู</h2>
                </div>
                <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
            </section>

            <section id="purchases" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-shopping-bag"></i> ุงููุดุชุฑูุงุช</h2>
                </div>
                <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
            </section>

            <section id="warehouses" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-warehouse"></i> ุฅุฏุงุฑุฉ ุงููุฎุงุฒู</h2>
                </div>
                <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
            </section>

            <section id="debts" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-money-bill-wave"></i> ุงูุฏููู ูุงููุฏููุนุงุช</h2>
                </div>
                <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
            </section>

            <section id="reports" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-chart-bar"></i> ุงูุชูุงุฑูุฑ</h2>
                </div>
                <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
            </section>

            <section id="settings" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-cog"></i> ุงูุฅุนุฏุงุฏุงุช</h2>
                </div>
                <div class="loading">ุฌุงุฑู ุงูุชุญููู...</div>
            </section>
        </main>
    </div>

    <!-- ุงูููุงูุฐ ุงูููุจุซูุฉ -->
    <div id="modalOverlay" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">ุนููุงู ุงููุงูุฐุฉ</h3>
                <button class="modal-close" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- ูุญุชูู ุงููุงูุฐุฉ -->
            </div>
        </div>
    </div>

    <!-- ุชุญููู ุงููููุงุช -->
    <script src="database.js"></script>
    <script src="diagnostic.js"></script>
    <script src="recovery.js"></script>
    <script src="sample-data.js"></script>
    <script src="main.js"></script>
    <script src="app.js"></script>
    <script src="dashboard.js"></script>

    <script>
        // ุชููุฆุฉ ุงูุชุทุจูู ูุน ุงูุชุดุฎูุต ุงูุชููุงุฆู
        document.addEventListener('DOMContentLoaded', function() {
            try {
                // ุชุดุบูู ุงูุชุดุฎูุต ุงูุชููุงุฆู ุจุนุฏ ุชุญููู ุงููุธุงู
                setTimeout(() => {
                    if (typeof diagnostic !== 'undefined') {
                        console.log('๐ ุชุดุบูู ุงูุชุดุฎูุต ุงูุชููุงุฆู...');
                        const result = diagnostic.runFullDiagnostic();

                        if (result.status === 'needs_attention') {
                            console.log('โ๏ธ ุชู ุงูุนุซูุฑ ุนูู ูุดุงูู ูู ุงููุธุงู');
                            console.log('๐ก ุงุณุชุฎุฏู autoFix() ููุฅุตูุงุญ ุงูุชููุงุฆู');

                            // ุนุฑุถ ุฅุดุนุงุฑ ูููุณุชุฎุฏู
                            if (typeof showNotification === 'function') {
                                showNotification('ุชู ุงูุนุซูุฑ ุนูู ูุดุงูู ูู ุงููุธุงู. ุชุญูู ูู ูุญุฉ ุงูุชุญูู ููุชูุงุตูู.', 'warning');
                            }
                        } else {
                            console.log('โ ุงููุธุงู ูุนูู ุจุดูู ุตุญูุญ');
                        }
                    }
                }, 3000);

            } catch (error) {
                console.error('ุฎุทุฃ ูู ุงูุชุดุฎูุต ุงูุชููุงุฆู:', error);
            }
        });
    </script>
</body>
</html>
